<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>GFZ-Rechner Perchtoldsdorf</title>
  <style>
    body { font-family: sans-serif; padding: 30px; max-width: 600px; margin: auto; }
    label, input { display: block; margin: 10px 0; width: 100%; }
    button { padding: 10px 15px; font-size: 16px; }
    .result { margin-top: 20px; font-size: 18px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>GFZ-Rechner Perchtoldsdorf</h1>
  <p>Gib Adresse, Grundst√ºcksfl√§che, verbaute Fl√§che und Geschossanzahl ein:</p>

  <label for="adresse">Adresse:</label>
  <input type="text" id="adresse" placeholder="z.B. Marktplatz 1">

  <label for="grundst√ºck">Grundst√ºcksfl√§che (m¬≤):</label>
  <input type="number" id="grundst√ºck" placeholder="z.B. 600" step="0.01">

  <label for="verbaute">Verbaute Fl√§che (m¬≤ pro Geschoss):</label>
  <input type="number" id="verbaute" placeholder="z.B. 200" step="0.01">

  <label for="geschosse">Anzahl der oberirdischen Geschosse:</label>
  <input type="number" id="geschosse" placeholder="z.B. 2">

  <button onclick="berechneGFZ()">GFZ berechnen</button>

  <div class="result" id="ergebnis"></div>

  <script>
  async function berechneGFZ() {
    const adresse = document.getElementById("adresse").value;
    const grundst√ºck = parseFloat(document.getElementById("grundst√ºck").value);
    const verbaute = parseFloat(document.getElementById("verbaute").value);
    const geschosse = parseFloat(document.getElementById("geschosse").value);
    const ergebnisDiv = document.getElementById("ergebnis");

    if (!adresse || isNaN(grundst√ºck) || isNaN(verbaute) || isNaN(geschosse) ||
        grundst√ºck <= 0 || verbaute <= 0 || geschosse <= 0) {
      ergebnisDiv.innerHTML = "‚ùó Bitte alle Felder korrekt ausf√ºllen.";
      return;
    }

    const gesamtfl√§che = verbaute * geschosse;
    const gfz = (gesamtfl√§che / grundst√ºck).toFixed(2);

    ergebnisDiv.innerHTML = `üìç Adresse: <strong>${adresse}</strong><br>
      ‚úÖ GFZ: <strong>${gfz}</strong><br>
      (zul√§ssig: max. 1,0 im Ortszentrum Perchtoldsdorf)`;

    // Daten an Google Sheet senden
    const daten = {
      adresse,
      grundst√ºck,
      verbaute,
      geschosse,
      gfz
    };

    try {
      await fetch("https://script.google.com/macros/s/AKfycbymqTIEtnWFttk3nJEVsM1NLerWFfJcjarQvVpj-9xD_DWRZzXwUdW8JSUSkG_CSXm6/exec", {
        method: "POST",
        body: JSON.stringify(daten),
        headers: { "Content-Type": "application/json" }
      });
      console.log("‚úÖ Adresse gespeichert.");
    } catch (err) {
      console.error("‚ùå Fehler beim Speichern:", err);
    }
  }
</script>

</body>
</html>
